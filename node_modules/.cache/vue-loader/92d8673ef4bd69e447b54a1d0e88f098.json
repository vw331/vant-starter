{"remainingRequest":"/Users/sun/project/vue-vant-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sun/project/vue-vant-starter/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sun/project/vue-vant-starter/src/views/Login.vue","mtime":1587056554808},{"path":"/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js","mtime":1586311340698},{"path":"/Users/sun/project/vue-vant-starter/node_modules/babel-loader/lib/index.js","mtime":1586311340688},{"path":"/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js","mtime":1586311340698},{"path":"/Users/sun/project/vue-vant-starter/node_modules/vue-loader/lib/index.js","mtime":1586311348101}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBGb3JtLCBGaWVsZCwgQnV0dG9uIH0gZnJvbSAndmFudCcKaW1wb3J0IHsgc2xlZXAgfSBmcm9tICdAL3V0aWxzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgY29tcG9uZW50czogewogICAgW0Zvcm0ubmFtZV06IEZvcm0sCiAgICBbRmllbGQubmFtZV06IEZpZWxkLAogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uCiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7fQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQodmFsdWVzKSB7CgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ0xPQURJTkcnLCB0cnVlKQogICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvbG9naW4nLCB2YWx1ZXMpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnN0IHsgc3VjY2VzcywgZGF0YSwgbWVzc2FnZSB9ID0gcmVzCiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0eXBlOiBzdWNjZXNzID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZQogICAgICAgICAgfSkKICAgICAgICAgIHN1Y2Nlc3MgJiYgdGhpcy5zdWNjZXNzSGFuZGxlKGRhdGEpCgogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdMT0FESU5HJywgZmFsc2UpCiAgICAgICAgfSkKCiAgICB9LAogICAgYXN5bmMgc3VjY2Vzc0hhbmRsZShkYXRhKXsKCiAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGRhdGEKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdBRERfVE9LRU4nLCB0b2tlbikKICAgICAgYXdhaXQgc2xlZXAoMTAwMCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQoKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"Login\">\n    <div class=\"wrap flex justify-center flex-col\">\n      <van-form class=\"login-from p-4\" @submit=\"onSubmit\">\n        <h2 class=\"text-4xl mb-4\">登录</h2>\n        <van-field\n          v-model=\"form.username\"\n          name=\"username\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"form.password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"mt-5\">\n          <van-button block type=\"info\" native-type=\"submit\"> 提交 </van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport { Form, Field, Button } from 'vant'\nimport { sleep } from '@/utils'\n\nexport default {\n  name: 'Login',\n  components: {\n    [Form.name]: Form,\n    [Field.name]: Field,\n    [Button.name]: Button\n  },\n  data(){\n    return {\n      form: {}\n    }\n  },\n  methods: {\n    onSubmit(values) {\n\n      this.$store.commit('LOADING', true)\n      this.$http.post('/api/login', values)\n        .then(res => {\n          const { success, data, message } = res\n          this.$notify({\n            type: success ? 'success' : 'error',\n            message\n          })\n          success && this.successHandle(data)\n\n        })\n        .finally(() => {\n          this.$store.commit('LOADING', false)\n        })\n\n    },\n    async successHandle(data){\n\n      const { token } = data\n      this.$store.commit('ADD_TOKEN', token)\n      await sleep(1000)\n      this.$router.push('/')\n\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  #Login {\n\n    .wrap {\n      height: 100vh\n    }\n\n    .login-from {\n      transform: translateY(-5rem);\n    }\n\n  }\n</style>\n"]}]}