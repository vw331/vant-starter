{"remainingRequest":"/Users/sun/project/vue-vant-starter/node_modules/babel-loader/lib/index.js!/Users/sun/project/vue-vant-starter/node_modules/eslint-loader/index.js??ref--13-0!/Users/sun/project/vue-vant-starter/src/request/axios.js","dependencies":[{"path":"/Users/sun/project/vue-vant-starter/src/request/axios.js","mtime":1587056665310},{"path":"/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js","mtime":1586311340698},{"path":"/Users/sun/project/vue-vant-starter/node_modules/babel-loader/lib/index.js","mtime":1586311340688},{"path":"/Users/sun/project/vue-vant-starter/node_modules/eslint-loader/index.js","mtime":1576511012919}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInZhbnQvZXMvdG9hc3Qvc3R5bGUvbGVzcyI7CmltcG9ydCBfVG9hc3QgZnJvbSAidmFudC9lcy90b2FzdCI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyL2luZGV4JzsKCl9Ub2FzdC5hbGxvd011bHRpcGxlKCk7Ci8qKgogKiDlvILluLjmj5DnpLrlh73mlbAKICovCgoKdmFyIHRpcCA9IGZ1bmN0aW9uIHRpcChtZXNzYWdlKSB7CiAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdmYWlsJzsKCiAgX1RvYXN0KHsKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICB0eXBlOiB0eXBlCiAgfSk7Cn07Ci8qKgogKiDnu5/kuIDlvILluLjlpITnkIYKICogQHBhcmFtKE51bWJlcikgc3RhdHVzIOivt+axguWksei0peeKtuaAgeeggQogKiovCgoKdmFyIGVycm9ySGFuZGxlID0gZnVuY3Rpb24gZXJyb3JIYW5kbGUoc3RhdHVzLCBvdGhlcikgewogIC8v54q25oCB56CB5Yik5patCiAgc3dpdGNoIChzdGF0dXMpIHsKICAgIC8vNDAxOiDmnKrnmbvlvZXnirbmgIEKICAgIGNhc2UgNDAxOgogICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgfSk7CiAgICAgIGJyZWFrOwogICAgLy80MDMgdG9rZW4g6L+H5pyfCgogICAgY2FzZSA0MDM6CiAgICAgIHRpcCgn55m75b2V6L+H5pyf77yM6K+36YeN5paw55m75b2VJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0sIDEwMDApOwogICAgICBicmVhazsKCiAgICBjYXNlIDQwNDoKICAgICAgdGlwKCc0MDQs6K+35rGC55qE6LWE5rqQ5LiN5a2Y5ZyoJyk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNTAwOgogICAgICB0aXAoJzUwMCzmnI3liqHplJnor68nKTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgY29uc29sZS53YXJuKG90aGVyKTsKICAgICAgdGlwKCfov57mjqXlpLHotKUnKTsKICB9Cn07IC8v5Yib5bu65a6e5L6LCgoKdmFyICRodHRwID0gYXhpb3MuY3JlYXRlKHsKICB0aW1lb3V0OiAxMDAwICogMTIKfSk7CiRodHRwLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7Ci8qKgogKiDor7fmsYLmi6bmiKrlmagKICog6YWN572udG9rZW4KICogKiovCgokaHR0cC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoKTsKLyoqCiAqIOWTjeW6lOaLpuaIquWZqAogKiovCgokaHR0cC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKCAvL+aIkOWKnwpmdW5jdGlvbiAocmVzKSB7CiAgcmV0dXJuIHJlcy5zdGF0dXMgPT09IDIwMCA/IFByb21pc2UucmVzb2x2ZShyZXMuZGF0YSkgOiBQcm9taXNlLnJlamVjdChyZXMpOwp9LCAvL+Wksei0pQpmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZTsKCiAgaWYgKHJlc3BvbnNlKSB7CiAgICBlcnJvckhhbmRsZShyZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpOwogIH0gZWxzZSB7CiAgICAvL+acqui/lOWbnizotoXml7bmiJbmlq3nvZEKICAgIHRpcCgn6K+35rGC6LaF5pe2Jyk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgJGh0dHA7"},{"version":3,"sources":["/Users/sun/project/vue-vant-starter/src/request/axios.js"],"names":["axios","router","allowMultiple","tip","message","type","errorHandle","status","other","replace","path","localStorage","removeItem","setTimeout","window","location","reload","console","warn","$http","create","timeout","defaults","headers","post","interceptors","request","use","response","res","Promise","resolve","data","reject","error"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;;AAEA,OAAMC,aAAN;AACA;;;;;AAGA,IAAMC,GAAG,GAAG,SAANA,GAAM,CAACC,OAAD,EAA4B;AAAA,MAAlBC,IAAkB,uEAAX,MAAW;;AACtC,SAAM;AACJD,IAAAA,OAAO,EAAPA,OADI;AAEJC,IAAAA,IAAI,EAAJA;AAFI,GAAN;AAID,CALD;AAOA;;;;;;AAIA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,KAAT,EAAmB;AACrC;AACA,UAAQD,MAAR;AACA;AACA,SAAK,GAAL;AACEN,MAAAA,MAAM,CAACQ,OAAP,CAAe;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAf;AACA;AACA;;AACF,SAAK,GAAL;AACEP,MAAAA,GAAG,CAAC,YAAD,CAAH;AACAQ,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAC,MAAAA,UAAU,CAAC,YAAM;AACfC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAFS,EAEP,IAFO,CAAV;AAGA;;AACF,SAAK,GAAL;AACEb,MAAAA,GAAG,CAAC,cAAD,CAAH;AACA;;AACF,SAAK,GAAL;AACEA,MAAAA,GAAG,CAAC,UAAD,CAAH;AACA;;AACF;AACEc,MAAAA,OAAO,CAACC,IAAR,CAAaV,KAAb;AACAL,MAAAA,GAAG,CAAC,MAAD,CAAH;AArBF;AAuBD,CAzBD,C,CA4BA;;;AACA,IAAMgB,KAAK,GAAGnB,KAAK,CAACoB,MAAN,CAAa;AAAEC,EAAAA,OAAO,EAAE,OAAO;AAAlB,CAAb,CAAd;AAEAF,KAAK,CAACG,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,kBAA9C;AAGA;;;;;AAIAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B;AAEA;;;;AAGAR,KAAK,CAACM,YAAN,CAAmBG,QAAnB,CAA4BD,GAA5B,EACE;AACA,UAAAE,GAAG;AAAA,SAAIA,GAAG,CAACtB,MAAJ,KAAe,GAAf,GAAqBuB,OAAO,CAACC,OAAR,CAAgBF,GAAG,CAACG,IAApB,CAArB,GAAiDF,OAAO,CAACG,MAAR,CAAeJ,GAAf,CAArD;AAAA,CAFL,EAGE;AACA,UAAAK,KAAK,EAAI;AAAA,MACCN,QADD,GACcM,KADd,CACCN,QADD;;AAEP,MAAIA,QAAJ,EAAc;AACZtB,IAAAA,WAAW,CAACsB,QAAQ,CAACrB,MAAV,EAAkBqB,QAAQ,CAACI,IAAT,CAAc5B,OAAhC,CAAX;AACA,WAAO0B,OAAO,CAACG,MAAR,CAAeL,QAAf,CAAP;AACD,GAHD,MAGO;AACL;AACAzB,IAAAA,GAAG,CAAC,MAAD,CAAH;AACD;AACF,CAbH;AAgBA,eAAegB,KAAf","sourcesContent":["import axios from 'axios'\nimport { Toast } from 'vant'\nimport router from '../router/index'\n\nToast.allowMultiple()\n/**\n * 异常提示函数\n */\nconst tip = (message, type = 'fail') => {\n  Toast({\n    message,\n    type\n  })\n}\n\n/**\n * 统一异常处理\n * @param(Number) status 请求失败状态码\n **/\nconst errorHandle = (status, other) => {\n  //状态码判断\n  switch (status) {\n  //401: 未登录状态\n  case 401:\n    router.replace({ path: '/login' })\n    break;\n    //403 token 过期\n  case 403:\n    tip('登录过期，请重新登录')\n    localStorage.removeItem('token')\n    setTimeout(() => {\n      window.location.reload()\n    }, 1000)\n    break;\n  case 404:\n    tip('404,请求的资源不存在')\n    break;\n  case 500:\n    tip('500,服务错误')\n    break;\n  default:\n    console.warn(other)\n    tip('连接失败')\n  }\n}\n\n\n//创建实例\nconst $http = axios.create({ timeout: 1000 * 12 })\n\n$http.defaults.headers.post['Content-Type'] = 'application/json'\n\n\n/**\n * 请求拦截器\n * 配置token\n * **/\n$http.interceptors.request.use()\n\n/**\n * 响应拦截器\n **/\n$http.interceptors.response.use(\n  //成功\n  res => res.status === 200 ? Promise.resolve(res.data) : Promise.reject(res),\n  //失败\n  error => {\n    const { response } = error\n    if (response) {\n      errorHandle(response.status, response.data.message)\n      return Promise.reject(response)\n    } else {\n      //未返回,超时或断网\n      tip('请求超时')\n    }\n  }\n)\n\nexport default $http\n"]}]}