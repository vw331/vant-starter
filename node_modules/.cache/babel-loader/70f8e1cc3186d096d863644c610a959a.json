{"remainingRequest":"/Users/sun/project/vue-vant-starter/node_modules/babel-loader/lib/index.js!/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sun/project/vue-vant-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sun/project/vue-vant-starter/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sun/project/vue-vant-starter/src/views/Login.vue","mtime":1587056554808},{"path":"/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js","mtime":1586311340698},{"path":"/Users/sun/project/vue-vant-starter/node_modules/babel-loader/lib/index.js","mtime":1586311340688},{"path":"/Users/sun/project/vue-vant-starter/node_modules/cache-loader/dist/cjs.js","mtime":1586311340698},{"path":"/Users/sun/project/vue-vant-starter/node_modules/vue-loader/lib/index.js","mtime":1586311348101}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvc3VuL3Byb2plY3QvdnVlLXZhbnQtc3RhcnRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL3N1bi9wcm9qZWN0L3Z1ZS12YW50LXN0YXJ0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJ2YW50L2VzL2J1dHRvbi9zdHlsZS9sZXNzIjsKaW1wb3J0IF9CdXR0b24gZnJvbSAidmFudC9lcy9idXR0b24iOwppbXBvcnQgInZhbnQvZXMvZmllbGQvc3R5bGUvbGVzcyI7CmltcG9ydCBfRmllbGQgZnJvbSAidmFudC9lcy9maWVsZCI7CmltcG9ydCAidmFudC9lcy9mb3JtL3N0eWxlL2xlc3MiOwppbXBvcnQgX0Zvcm0gZnJvbSAidmFudC9lcy9mb3JtIjsKCnZhciBfY29tcG9uZW50czsKCmltcG9ydCB7IHNsZWVwIH0gZnJvbSAnQC91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IChfY29tcG9uZW50cyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9Gb3JtLm5hbWUsIF9Gb3JtKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfRmllbGQubmFtZSwgX0ZpZWxkKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfQnV0dG9uLm5hbWUsIF9CdXR0b24pLCBfY29tcG9uZW50cyksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdMT0FESU5HJywgdHJ1ZSk7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9sb2dpbicsIHZhbHVlcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHN1Y2Nlc3MgPSByZXMuc3VjY2VzcywKICAgICAgICAgICAgZGF0YSA9IHJlcy5kYXRhLAogICAgICAgICAgICBtZXNzYWdlID0gcmVzLm1lc3NhZ2U7CgogICAgICAgIF90aGlzLiRub3RpZnkoewogICAgICAgICAgdHlwZTogc3VjY2VzcyA/ICdzdWNjZXNzJyA6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgfSk7CgogICAgICAgIHN1Y2Nlc3MgJiYgX3RoaXMuc3VjY2Vzc0hhbmRsZShkYXRhKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnTE9BRElORycsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VjY2Vzc0hhbmRsZTogZnVuY3Rpb24gc3VjY2Vzc0hhbmRsZShkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdG9rZW4gPSBkYXRhLnRva2VuOwoKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCdBRERfVE9LRU4nLCB0b2tlbik7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoMTAwMCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy8nKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AA+BA,SAAA,KAAA,QAAA,SAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,kDACA,MAAA,IADA,uCAEA,OAAA,IAFA,wCAGA,QAAA,IAHA,wBAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,MADA,EACA;AAAA;;AAEA,WAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,YAAA,EAAA,MAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AAAA,YACA,OADA,GACA,GADA,CACA,OADA;AAAA,YACA,IADA,GACA,GADA,CACA,IADA;AAAA,YACA,OADA,GACA,GADA,CACA,OADA;;AAEA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,UAAA,IAAA,EAAA,OAAA,GAAA,SAAA,GAAA,OADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;;AAIA,QAAA,OAAA,IAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA;AAEA,OATA,EAUA,OAVA,CAUA,YAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA;AACA,OAZA;AAcA,KAlBA;AAmBA,IAAA,aAnBA,yBAmBA,IAnBA,EAmBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAFA,GAEA,IAFA,CAEA,KAFA;;AAGA,gBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KAAA;;AAHA;AAAA,uBAIA,KAAA,CAAA,IAAA,CAJA;;AAAA;AAKA,gBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AA1BA;AAZA,CAAA","sourcesContent":["<template>\n  <div id=\"Login\">\n    <div class=\"wrap flex justify-center flex-col\">\n      <van-form class=\"login-from p-4\" @submit=\"onSubmit\">\n        <h2 class=\"text-4xl mb-4\">登录</h2>\n        <van-field\n          v-model=\"form.username\"\n          name=\"username\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"form.password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"mt-5\">\n          <van-button block type=\"info\" native-type=\"submit\"> 提交 </van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport { Form, Field, Button } from 'vant'\nimport { sleep } from '@/utils'\n\nexport default {\n  name: 'Login',\n  components: {\n    [Form.name]: Form,\n    [Field.name]: Field,\n    [Button.name]: Button\n  },\n  data(){\n    return {\n      form: {}\n    }\n  },\n  methods: {\n    onSubmit(values) {\n\n      this.$store.commit('LOADING', true)\n      this.$http.post('/api/login', values)\n        .then(res => {\n          const { success, data, message } = res\n          this.$notify({\n            type: success ? 'success' : 'error',\n            message\n          })\n          success && this.successHandle(data)\n\n        })\n        .finally(() => {\n          this.$store.commit('LOADING', false)\n        })\n\n    },\n    async successHandle(data){\n\n      const { token } = data\n      this.$store.commit('ADD_TOKEN', token)\n      await sleep(1000)\n      this.$router.push('/')\n\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  #Login {\n\n    .wrap {\n      height: 100vh\n    }\n\n    .login-from {\n      transform: translateY(-5rem);\n    }\n\n  }\n</style>\n"],"sourceRoot":"src/views"}]}